<!DOCTYPE html><html><head><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta charset="utf-8"><title>滴滴 MIS 团队技术博客 - 滴滴 MIS 团队技术博客</title><meta name="description" content=""><meta name="author" content=""><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1"><link rel="stylesheet" href="../../assets/css/bulma.min.css"><link rel="stylesheet" href="../../assets/css/app.css"><!--[if lt IE 9]>
<script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.2/html5shiv.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]--><link rel="shortcut icon" href=""></head><body dir="ltr"><nav class="columns navbar"><div class="column logo is-3 is-offset-1"><a class="is-brand" href="../../index.html">滴滴 MIS 团队技术博客</a></div></nav><div class="columns content"><div class="column is-2-desktop is-3-widescreen is-hidden-touch"></div><div class="column article-container is-11-tablet is-8-desktop is-6-widescreen"><div class="breadcrumb-area"><a href="../../index.html" class="breadcrumb-item">Home</a><span class="breadcrumb-delimiter"> &gt; </span><a href="../../2019/kafka/index.html" class="breadcrumb-item">Kafka</a><span class="breadcrumb-delimiter"> &gt; </span><a href="../../2019/kafka/2019-06-28-kafka-1.html" class="breadcrumb-item">初探Kafka</a></div><h1 class="article-title">滴滴 MIS 团队技术博客</h1><div class="article"><h1 id="初识kafka">初识Kafka <a class="markdownIt-Anchor" href="#初识kafka">#</a></h1><p></p><div id="toc" class="toc">undefined</div><p></p><h1 id="什么是kafka">什么是Kafka <a class="markdownIt-Anchor" href="#什么是kafka">#</a></h1><p>Kafka 一个多分区、多副本且基于 ZooKeeper 协调的分布式消息系统.目前 Kafka 已经定位为一个分布式流式处理平台，它有以下几个特点</p><ul><li>高吞吐</li><li>可持久化</li><li>可水平扩展</li><li>支持流数据处理</li></ul><h1 id="基本概念">基本概念 <a class="markdownIt-Anchor" href="#基本概念">#</a></h1><p>一个基本的Kafka集群由若干个<strong>Producer</strong>,若干个<strong>Broker</strong>, 若干个<strong>Consumer</strong>，以及一个<strong>Zookeeper</strong>集群构成.</p><figure><img src="http://processon.com/chart_image/5d120fd0e4b039f39f45ca0d.png" alt="Kafka体系架构图"><figcaption>Kafka体系架构图</figcaption></figure><h2 id="重要基础术语">重要基础术语 <a class="markdownIt-Anchor" href="#重要基础术语">#</a></h2><p>1.<strong>Producer</strong> : 生产者。负责消息的发送，并将其投递到 Broker 集群中。</p><p>2.<strong>Consumer</strong> : 消费者。负责从 Broker 接收 并消费消息。</p><p>3.<strong>Broker</strong> : 服务代理节点。通常情况下我们可以将一台只部署了一个 Kafka 实例的服务器认为是一个 Broker。一个或多个 Broker 组成了一个 Kafka 集群。</p><h2 id="消息主题分区">消息主题分区 <a class="markdownIt-Anchor" href="#消息主题分区">#</a></h2><p>在提消息主题分区，我们先介绍一下几个比较重要的概念 <strong>Topic</strong>, 以及 <strong>Partition</strong> , <strong>Offset</strong>。</p><ul><li><p><strong>Topic</strong> : 主题。Kafka 中的消息以主题为单位进行归类，生产者负责将消息发送到特定的主题。</p></li><li><p><strong>Partition</strong> : 分区。为了实现扩展性，一个非常大的 Topic 可以分成多个 Partition 分布到多个 Broker 上。同一主题下不同的分区的消息是不同的。</p></li><li><p><strong>Offset</strong> : 偏移量。每次消息追加到分区日志文件时，会产生一个偏移量，它可以保证分区中的消息的有序性，但是无法保证整个Topic的消息有序性，即分区有序，而非主题有序。</p></li></ul><p>如果所有消息都投递到一个主题上(主题在不分区的情况)，所有该主题下的消息都将投递到一台服务器上，而单机将会很容易达到一个系统的瓶颈.</p><p>为了解决此问题，通常情况下我们会对一个主题进行分区在通过指定的参数来设置分区的个数，从而达到水平扩展的目的。</p><figure><img src="http://processon.com/chart_image/5d121822e4b039f39f45d33c.png" alt="主题分区"><figcaption>主题分区</figcaption></figure><p>如上图所示，主题中有3个分区，消息被顺序追加到每个分区日志文件的尾部。</p><p>Kafka 中一个主题可拆分成多个分布在不同的Broker上，不同分区提供的数据也是不同的，通过分区这种方法，可解决单机性能问题。</p><p>每一条消息被发送到 broker 之前，会根据分区规则选择存储到哪个具体的分区。</p><p>如果分区规则设定得合理，所有的消息都可以均匀地分配到不同的分区中。</p></div><div dir="ltr" class="level article-bar is-mobile"><div class="level-item has-text-centered"><a title="previous page" class="previouse-article-link" href="../../2019/kafka/2019-06-24-scala-simple-lesson.html"><span class="icon icon-previous" data-icon="previous"></span><span class="link-content">&laquo; Previous</span></a></div><div class="level-item has-text-centered"><a title="font size" class="link-item link-item-size"><span class="icon icon-size" data-icon="size"></span></a></div><div class="level-item has-text-centered"><a title="table of content" class="link-item link-item-toc"><span class="icon icon-toc" data-icon="toc"></span></a></div><div class="level-item has-text-centered"><a title="top" href="#"><span class="icon icon-up" data-icon="up"></span> <span class="link-content">⤊ Top</span></a></div><div class="level-item has-text-centered"><a title="next page" class="next-article-link" href="../../2019/wxapp/index.html"><span class="icon icon-next" data-icon="next"></span><span class="link-content">Next &raquo;</span></a></div></div></div><div class="column is-2-widescreen is-hidden"></div></div><div class="columns foot"><div class="column is-3 is-offset-9 build-by">Build by <a href="https://github.com/ruanyf/loppo" target="_blank">Loppo</a> 0.6.14</div></div><div class="book-toc notification is-warning is-hidden"><h3>Table of chapters &nbsp;<span class="title-close"><a class="button is-danger"> Close</a></span></h3><ul class="chapter-area"><li class="chapter-item"><a href="../../2019/kafka/index.html">Kafka</a></li><ul class="chapter-level-2"><li class="chapter-item"><a href="../../2019/kafka/2019-06-24-scala-simple-lesson.html">Scala 简明教程</a></li><li class="chapter-item chapter-item-current"><a href="../../2019/kafka/2019-06-28-kafka-1.html">初探Kafka</a></li></ul><li class="chapter-item"><a href="../../2019/wxapp/index.html">小程序</a></li><ul class="chapter-level-2"><li class="chapter-item"><a href="../../2019/wxapp/2019-06-14-first_introduction.html">初识小程序</a></li><li class="chapter-item"><a href="../../2019/wxapp/2019-06-14-seconde_framework.html">小程序原理和开发框架介绍</a></li></ul></ul></div><div class="progress-indicator"></div><!-- SCRIPTS --><script>var LOPPO={current_path:"2019/kafka/2019-06-28-kafka-1.html",relative_root_path:"../../",article_toc:'<ul class="markdownIt-TOC">\n<li><a href="#%E9%87%8D%E8%A6%81%E5%9F%BA%E7%A1%80%E6%9C%AF%E8%AF%AD">重要基础术语</a></li>\n<li><a href="#%E6%B6%88%E6%81%AF%E4%B8%BB%E9%A2%98%E5%88%86%E5%8C%BA">消息主题分区</a></li>\n</ul>\n'}</script><script src="../../assets/js/app.js"></script></body></html>